# image_processor

Small console application for applying filters on images. Filters are applied in the order they appear in the command. Supports only 24-bit uncompressed BMP files.

## Usage
`image_processor <input_path> <output_path> [-filter_name [<params>]]`

## Available filters
1. `-crop height width` Crops the image to [height, width]. If image is smaller than requested result by any axis, it stays the same by this axis.
2. `-gs` Turns the image into grayscale.
3. `-neg` Inverts all colors.
4. `-sharp` Sharpens the image.
5. `-edge threshold` Outlines edges from the image. Threshold has sense only in range from 0 to 1. Higher threshold values produce fewer detected edges.
6. `-blur sigma` Applies Gaussian blur with parameter sigma. Higher sigma values produce a blurrier image.
7. `-fft-real [coefficient] [verbose]` Converts image into absolute values of real parts of coefficients in frequency domain representation.
   If [coefficient] is given, values are multiplied by it. [verbose] should be either 0 or 1 and regulates printing 50 maximal values (without multiplication by [coefficient]).
8. `-fft-imag [coefficient] [verbose]` Converts image into absolute values of imaginary parts of coefficients in frequency domain representation.
   See -fft-real for parameters description.
9. `-fft-magnitude [coefficient] [verbose]` Converts image into magnitudes of coefficients in frequency domain representation. See -fft-real for parameters description.
10. `-fft-phase [coefficient] [verbose]` Converts image into phases of coefficients in frequency domain representation, normalized to have values from 0 to 1. See -fft-real for parameters description.
11. `-fft-lowpass threshold` Keeps frequencies inside rectangle [threshold * height, threshold * width] in the frequency domain representation of the image and removes others,
    then applies inverse Fast Fourier Transform. Threshold must be between 0 and 1. More the threshold, more frequencies are kept.
12. `-fft-highpass threshold` Removes frequencies inside rectangle [threshold * height, threshold * width] in the frequency domain representation of the image and keeps others,
    then applies inverse Fast Fourier Transform. Threshold must be between 0 and 1. More the threshold, fewer frequencies are removed.
13. `-fft-peaks threshold [safe_zone_height, safe_zone_width]` Removes peaks from frequency domain representation of the image, then applies inverse Fast Fourier
    Transform. Coefficients with magnitudes greater than threshold are considered peaks. Threshold must be between 0 and 1. If safe zone is specified,
    rectangle [safe_zone_height * height, safe_zone_width * width] on FFT of the image will not be processed.

## Examples

### `-fft-magnitude` and `-fft-phase`

Those filters applies FFT on the image and sets pixel colors as magnitude/phase of the corresponding coefficient, multiplied by coefficient (1000 in example below).
While magnitude stores organized information (see examples below), phase is mostly random.

<p float="left">
  <img src="https://github.com/timofeykhodykin/image_processor/blob/main/images/lenna.bmp" width="300" height="300" alt="">
  <img src="https://github.com/timofeykhodykin/image_processor/blob/main/images/lenna_magnitude_1000.bmp" width="300" height="300" alt="">
  <img src="https://github.com/timofeykhodykin/image_processor/blob/main/images/lenna_phase.bmp" width="300" height="300" alt="">
</p>

### `-fft-lowpass` and `-fft-highpass`

Main part of the information are stored in low frequencies zone, so by passing only such frequencies we can blurry image; and vice versa, by passing only high
frequencies, we can get outlines of the image.

<p float="left">
  <img src="https://github.com/timofeykhodykin/image_processor/blob/main/images/lenna.bmp" width="300" height="300" alt="">
  <img src="https://github.com/timofeykhodykin/image_processor/blob/main/images/lenna_lowpass_0_01.bmp" width="300" height="300" alt="">
  <img src="https://github.com/timofeykhodykin/image_processor/blob/main/images/lenna_highpass_0_005.bmp" width="300" height="300" alt="">
</p>

### `-fft-peaks`
This filter allows to remove repetative patterns from the image in case they generate peaks (frequencies with high magnitude) after applying FFT. It can be used
to clean image from noise.

Consider image of a fingerprint on a surface with texture. After applying FFT to the image there are frequencies with high magnitudes (i.e. "peaks" on the second picture).
So, by setting coefficients of this frequencies to zero we can get clear image (see picture three).

Those images were generated by such commands:

`image_processor a.bmp b.bmp -fft-magnitude 1000`

`image_processor a.bmp b.bmp -fft-peaks 0.0007 0.013 0.013 -sharp`

<p float="left">
  <img src="https://github.com/timofeykhodykin/image_processor/blob/main/images/fingerprint.bmp" width="300" height="300" alt="">
  <img src="https://github.com/timofeykhodykin/image_processor/blob/main/images/fingerprint_magnitude_1000.bmp" width="300" height="300" alt="">
  <img src="https://github.com/timofeykhodykin/image_processor/blob/main/images/fingerprint_peaks_0_0007_0_013_sharp.bmp" width="300" height="300" alt="">
</p>

Another example (generated by `image_processor a.bmp b.bmp -fft-peaks 0.001 0.02 1`):

<p float="left">
  <img src="https://github.com/timofeykhodykin/image_processor/blob/main/images/moon.bmp" width="300" alt="">
  <img src="https://github.com/timofeykhodykin/image_processor/blob/main/images/moon_peaks_0_001_0_02_1.bmp" width="300" alt="">
</p>